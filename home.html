<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>Contact Result — Exercise 52</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:18px;color:#222}
    .wrap{max-width:880px;margin:0 auto}
    h1{font-size:18px;margin-bottom:8px}
    .box{background:#fafafa;border:1px solid #ddd;padding:14px;border-radius:6px}
    table{width:100%;border-collapse:collapse;margin-top:8px}
    th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
    .label{width:220px;color:#444;font-weight:700}
    .raw{margin-top:12px;color:#666;font-size:.9rem;word-break:break-all}
    .btn-back{display:inline-block;margin-top:12px;padding:8px 12px;background:#1976d2;color:#fff;border-radius:6px;text-decoration:none}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Contact — Sent data (GET)</h1>
    <div class="box" id="result">
      <p>Below are the parameters received by the result page (parsed from the URL query string):</p>

      <table id="params">
        <tbody>
          <!-- rows inserted by JS -->
        </tbody>
      </table>

      <div class="raw" id="rawQuery"></div>

      <a class="btn-back" href="contact.html">Back to Contact</a>
    </div>
  </div>

  <script>
    function renderParams() {
      const params = new URLSearchParams(window.location.search);
      const tbody = document.querySelector('#params tbody');
      tbody.innerHTML = '';

      if (!Array.from(params.keys()).length) {
        tbody.innerHTML = '<tr><td class="label">No data</td><td>Không có tham số (form chưa gửi)</td></tr>';
      } else {
        // We want to show all keys (support multi-values too)
        const seen = new Set();
        for (const [key, value] of params.entries()) {
          if (seen.has(key)) {
            // append to existing cell if multiple values for same key
            const existing = document.querySelector('#params tbody tr[data-key="'+key+'"] td.value');
            if (existing) existing.textContent += ', ' + value;
          } else {
            seen.add(key);
            const tr = document.createElement('tr');
            tr.setAttribute('data-key', key);
            const th = document.createElement('td');
            th.className = 'label';
            th.textContent = key;
            const td = document.createElement('td');
            td.className = 'value';
            td.textContent = value;
            tr.appendChild(th);
            tr.appendChild(td);
            tbody.appendChild(tr);
          }
        }
      }

      document.getElementById('rawQuery').textContent = 'Raw query string: ' + (window.location.search || '(empty)');
    }

    renderParams();
  </script>
</body>
</html>
